{"ast":null,"code":"import _toConsumableArray from\"/Users/jhairorivera/Documents/Cursos/twitter/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/Users/jhairorivera/Documents/Cursos/twitter/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/jhairorivera/Documents/Cursos/twitter/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/* eslint-disable eqeqeq */import React,{useState,useEffect}from'react';import queryString from\"query-string\";import{withRouter}from\"react-router-dom\";import{useDebouncedCallback}from\"use-debounce\";import{isEmpty}from\"lodash\";import{Spinner,Button,ButtonGroup}from\"react-bootstrap\";import BasicLayout from\"../../../layout/BasicLayout\";import{getFollowers}from\"../../../api/Follow\";import ListUsers from\"../Users/ListUsers\";import\"../../../scss/Users.scss\";var Users=function Users(props){var setCheckLogin=props.setCheckLogin,location=props.location,history=props.history;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),users=_useState2[0],setUsers=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(location.search||\"follow\"),_useState6=_slicedToArray(_useState5,2),type=_useState6[0],setType=_useState6[1];var params=queryString.stringify(getParams(location));var _params=getParams(location);var _useDebouncedCallback=useDebouncedCallback(function(value){setUsers(null);history.push({search:queryString.stringify(_objectSpread(_objectSpread({},getParams(location)),{},{search:value,page:1}))});},200),_useDebouncedCallback2=_slicedToArray(_useDebouncedCallback,1),onSearch=_useDebouncedCallback2[0];useEffect(function(){getFollowers(params).then(function(response){if(_params.page==1){if(isEmpty(response))setUsers([]);else setUsers(response);}else{if(!response)setLoading(0);else setUsers([].concat(_toConsumableArray(users),_toConsumableArray(response)));}}).catch(function(){return setUsers([]);});// eslint-disable-next-line react-hooks/exhaustive-deps\n},[location]);var changeType=function changeType(type){setUsers(null);if(type)setType(type);history.push({search:queryString.stringify({type:type,page:1})});};var moreUsers=function moreUsers(){setLoading(true);var newPage=parseInt(_params.page)+1;history.push({search:queryString.stringify(_objectSpread(_objectSpread({},getParams(location)),{},{page:newPage}))});};return/*#__PURE__*/React.createElement(BasicLayout,{className:\"users\",setCheckLogin:setCheckLogin},/*#__PURE__*/React.createElement(\"div\",{className:\"users-title\"},/*#__PURE__*/React.createElement(\"h2\",null,\"Usuarios\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",onChange:function onChange(e){return onSearch(e.target.value);},placeholder:\"Buscar usuarios\"})),/*#__PURE__*/React.createElement(ButtonGroup,{className:\"users-options\"},/*#__PURE__*/React.createElement(Button,{className:type===\"follow\"&&\"active\",onClick:function onClick(){return changeType(\"follow\");}},\"Siguiendo\"),/*#__PURE__*/React.createElement(Button,{className:type===\"new\"&&\"active\",onClick:function onClick(){return changeType(\"new\");}},\"Seguir\")),!users?/*#__PURE__*/React.createElement(\"div\",{className:\"users-loading\"},/*#__PURE__*/React.createElement(Spinner,{variant:\"info\",animation:\"border\"}),\"Buscando Usuarios\"):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(ListUsers,{users:users}),/*#__PURE__*/React.createElement(Button,{onClick:moreUsers,className:\"load-more\"},!loading?loading!==0&&\"Cargar más usuarios\":/*#__PURE__*/React.createElement(Spinner,{as:\"span\",animation:\"grow\",size:\"sm\",role:\"status\",\"aria-hidden\":\"true\"}))));};function getParams(location){var _queryString$parse=queryString.parse(location.search),_queryString$parse$ty=_queryString$parse.type,type=_queryString$parse$ty===void 0?\"follow\":_queryString$parse$ty,_queryString$parse$pa=_queryString$parse.page,page=_queryString$parse$pa===void 0?1:_queryString$parse$pa,search=_queryString$parse.search;return{type:type,page:page,search:search};}export default withRouter(Users);","map":{"version":3,"sources":["/Users/jhairorivera/Documents/Cursos/twitter/src/components/views/Users/Users.js"],"names":["React","useState","useEffect","queryString","withRouter","useDebouncedCallback","isEmpty","Spinner","Button","ButtonGroup","BasicLayout","getFollowers","ListUsers","Users","props","setCheckLogin","location","history","users","setUsers","loading","setLoading","search","type","setType","params","stringify","getParams","_params","value","push","page","onSearch","then","response","catch","changeType","moreUsers","newPage","parseInt","e","target","parse"],"mappings":"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","sourcesContent":["/* eslint-disable eqeqeq */\nimport React, {useState, useEffect} from 'react';\nimport queryString from \"query-string\";\nimport {withRouter} from \"react-router-dom\";\nimport {useDebouncedCallback} from \"use-debounce\";\nimport {isEmpty} from \"lodash\";\nimport {Spinner, Button, ButtonGroup} from \"react-bootstrap\";\nimport BasicLayout from \"../../../layout/BasicLayout\";\nimport {getFollowers} from \"../../../api/Follow\";\nimport ListUsers from \"../Users/ListUsers\";\nimport \"../../../scss/Users.scss\";\nconst Users = (props) => {\n    const {setCheckLogin, location, history} = props;\n    const [users, setUsers] = useState(null);\n    const [loading, setLoading] = useState(false);\n    const [type, setType] = useState(location.search || \"follow\");\n    const params = queryString.stringify(getParams(location));\n    const _params = getParams(location);\n    const [onSearch] = useDebouncedCallback((value)=>{\n        setUsers(null);\n        history.push({\n            search : queryString.stringify({ ...getParams(location), search: value, page:1})\n        });\n    }, 200);\n    useEffect(() => {\n        getFollowers(params).then(response=>{\n            if(_params.page == 1){\n                if(isEmpty(response))\n                    setUsers([]);\n                else\n                    setUsers(response)\n            }\n            else{\n                if(!response)\n                    setLoading(0);\n                else\n                    setUsers([...users, ...response])\n            }   \n        })\n        .catch(()=> setUsers([]));\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    },[location])\n    const changeType = type =>{\n        setUsers(null);\n        if(type)\n            setType(type);\n        history.push({\n            search : queryString.stringify({type: type, page:1})\n        });\n    }\n    const moreUsers = () =>{\n        setLoading(true);\n        const newPage = parseInt(_params.page) +1;\n        history.push({\n            search : queryString.stringify({...getParams(location), page:newPage})\n        });\n    }\n    return (\n        <BasicLayout className=\"users\" setCheckLogin={setCheckLogin} >\n            <div className=\"users-title\">\n                <h2>Usuarios</h2>\n                <input type=\"text\" onChange={e => onSearch(e.target.value)} placeholder=\"Buscar usuarios\" />\n            </div>\n            <ButtonGroup className=\"users-options\">\n                <Button className={type===\"follow\" && \"active\"}\n                onClick={()=> changeType(\"follow\") }>Siguiendo</Button>\n                <Button className={type===\"new\" && \"active\"}\n                onClick={()=> changeType(\"new\") }>Seguir</Button>\n            </ButtonGroup>\n            { !users ? (\n                <div className=\"users-loading\">\n                    <Spinner variant=\"info\" animation=\"border\"/>\n                    Buscando Usuarios\n                </div>\n            ) : (\n                <>\n                <ListUsers users={users} />\n                <Button onClick={moreUsers} className=\"load-more\">\n                    {!loading ? (\n                        loading !== 0 && \"Cargar más usuarios\"\n                    ): (\n                        <Spinner as=\"span\" animation=\"grow\" size=\"sm\" role=\"status\" aria-hidden=\"true\" />\n                    )}\n                </Button>\n                </>\n            )} \n        </BasicLayout>\n    );\n}\nfunction getParams(location){\n    const {type = \"follow\", page = 1, search} = queryString.parse(location.search);\n    return {type, page, search};\n}\nexport default withRouter(Users);"]},"metadata":{},"sourceType":"module"}