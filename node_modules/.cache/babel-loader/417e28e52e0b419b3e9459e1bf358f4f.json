{"ast":null,"code":"import _toConsumableArray from\"/Users/jhairorivera/Documents/Cursos/twitter/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/jhairorivera/Documents/Cursos/twitter/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import BasicLayout from\"../../../layout/BasicLayout\";import{withRouter}from\"react-router-dom\";import{Button,Spinner}from\"react-bootstrap\";import{toast}from\"react-toastify\";import{ProfileApi}from\"../../../api/ProfileAPI\";import BannerAvatar from\"../../BannerAvatar/BannerAvatar\";import useAuth from\"../../../hooks/useAuth\";import InfoUser from\"../User/InfoUser\";import{getTweets}from\"../../../api/Tweet\";import Tweets from\"./Tweets\";import\"../../../scss/Profile.scss\";var Profile=function Profile(props){var match=props.match,setCheckLogin=props.setCheckLogin;var params=match.params;var _useState=useState(),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),tweets=_useState4[0],setTweets=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),loadingTweets=_useState6[0],setLoadingTweets=_useState6[1];var _useState7=useState(1),_useState8=_slicedToArray(_useState7,2),page=_useState8[0],setPage=_useState8[1];var loggedUser=useAuth();var moreTweets=function moreTweets(e){var pageTemp=page+1;setLoadingTweets(true);getTweets(params.id,pageTemp).then(function(response){if(!response)setLoadingTweets(0);else{setTweets([].concat(_toConsumableArray(tweets),_toConsumableArray(response)));setPage(pageTemp);setLoadingTweets(false);}});};useEffect(function(){ProfileApi(params.id).then(function(response){if(!response)toast.error(\"No se ha podido encontrar el perfil del usuario\");setUser(response);}).catch(function(error){return toast.error(\"Ha ocurrido un error, intente m치s tarde\");});},[params]);useEffect(function(){getTweets(params.id,1).then(function(response){return setTweets(response);}).catch(function(){return setTweets([]);});},[params]);return/*#__PURE__*/React.createElement(BasicLayout,{setCheckLogin:setCheckLogin,className:\"profile\"},/*#__PURE__*/React.createElement(BannerAvatar,{user:user,loggedUser:loggedUser,setCheckLogin:setCheckLogin}),/*#__PURE__*/React.createElement(InfoUser,{user:user}),/*#__PURE__*/React.createElement(\"div\",{className:\"profile-tweets\"},tweets&&/*#__PURE__*/React.createElement(Tweets,{tweets:tweets}),/*#__PURE__*/React.createElement(Button,{onClick:moreTweets},!loadingTweets?loadingTweets!==0&&\"M치s tweets\":/*#__PURE__*/React.createElement(Spinner,{as:\"span\",animation:\"grow\",size:\"sm\",role:\"status\",\"arian-hidden\":\"true\"}))));};export default withRouter(Profile);","map":{"version":3,"sources":["/Users/jhairorivera/Documents/Cursos/twitter/src/components/views/Profile/index.js"],"names":["React","useState","useEffect","BasicLayout","withRouter","Button","Spinner","toast","ProfileApi","BannerAvatar","useAuth","InfoUser","getTweets","Tweets","Profile","props","match","setCheckLogin","params","user","setUser","tweets","setTweets","loadingTweets","setLoadingTweets","page","setPage","loggedUser","moreTweets","e","pageTemp","id","then","response","error","catch"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport BasicLayout from \"../../../layout/BasicLayout\";\nimport {withRouter} from \"react-router-dom\";\nimport {Button, Spinner} from \"react-bootstrap\";\nimport {toast} from \"react-toastify\";\nimport {ProfileApi} from \"../../../api/ProfileAPI\";\nimport BannerAvatar from \"../../BannerAvatar/BannerAvatar\"\nimport useAuth from \"../../../hooks/useAuth\";\nimport InfoUser from \"../User/InfoUser\";\nimport {getTweets} from \"../../../api/Tweet\";\nimport Tweets from \"./Tweets\";\nimport \"../../../scss/Profile.scss\";\nconst Profile = (props) => {\n    const {match, setCheckLogin} = props;\n    const {params} = match;\n    const [user, setUser] = useState();\n    const [tweets, setTweets] = useState(null);\n    const [loadingTweets, setLoadingTweets] = useState(null);\n    const [page, setPage] = useState(1);\n    const loggedUser = useAuth();\n    const moreTweets = e =>{\n        const pageTemp = page +1;\n        setLoadingTweets(true);\n        getTweets(params.id, pageTemp).then(response=>{\n            if(!response)\n                setLoadingTweets(0);\n            else{\n                setTweets([...tweets, ...response]);\n                setPage(pageTemp);\n                setLoadingTweets(false);\n            }\n        })\n    }\n    useEffect(() => {\n        ProfileApi(params.id).then(response=>{\n            if(!response)\n                toast.error(\"No se ha podido encontrar el perfil del usuario\");\n            setUser(response);\n        })\n        .catch(error=> toast.error(\"Ha ocurrido un error, intente m치s tarde\"));\n    },[params]);\n    useEffect(() => {\n        getTweets(params.id, 1).then(response=> setTweets(response))\n        .catch(()=> setTweets([]))\n    },[params])\n    return (\n        <BasicLayout setCheckLogin={setCheckLogin} className=\"profile\">\n            {/* <div className=\"profile-title\">\n                <h3>{user ? `${user.nombre} ${user.apellido}` : \"\" }</h3>\n            </div> */}\n            <BannerAvatar user={user} loggedUser={loggedUser} setCheckLogin={setCheckLogin} />\n            <InfoUser user={user} />\n            <div className=\"profile-tweets\">\n                {tweets && <Tweets tweets={tweets} /> }\n            <Button onClick={moreTweets} >\n                {!loadingTweets ? (\n                    loadingTweets !== 0 && \"M치s tweets\") : (\n                    <Spinner as=\"span\" animation=\"grow\" size=\"sm\" role=\"status\" arian-hidden=\"true\" />\n                )}\n            </Button>\n            </div>\n        </BasicLayout>\n    );\n}\nexport default withRouter(Profile);\n"]},"metadata":{},"sourceType":"module"}