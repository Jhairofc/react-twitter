{"ast":null,"code":"var _jsxFileName = \"/Users/jhairorivera/Documents/Cursos/twitter/src/components/views/User/UpdateUser.js\";\nimport React, { useState, useCallback } from 'react';\nimport { Form, Row, Col, Button } from \"react-bootstrap\";\nimport { toast } from \"react-toastify\";\nimport DatePicker from \"react-datepicker\";\nimport es from \"date-fns/locale/es\";\nimport { useDropzone } from \"react-dropzone\";\nimport { LOCALHOST } from \"../../../utils/Constants\";\nimport { Camera } from \"../../../utils/Icons\";\nimport { UploadBannerApi } from \"../../../api/UploadBannerAPI\";\nimport { UploadAvatarApi } from \"../../../api/UploadAvatar\";\nimport { UpdateUserApi } from \"../../../api/UpdateAPI\";\nimport \"../../../scss/UpdateUser.scss\";\n\nconst UpdateUser = props => {\n  const {\n    user,\n    setShow,\n    setCheckLogin\n  } = props;\n  const [data, setData] = useState(initForm(user));\n  const [dataBanner, setDataBanner] = useState(null);\n  const [dataAvatar, setDataAvatar] = useState(null); //Codigo para cambiar el banner y avatar utilizando la libreria useDropZone\n\n  const [banner, setBanner] = useState((user === null || user === void 0 ? void 0 : user.banner) ? `${LOCALHOST}/obtenerBanner?id=${user.id}` : null);\n  const [avatar, setAvatar] = useState((user === null || user === void 0 ? void 0 : user.avatar) ? `${LOCALHOST}/obtenerAvatar?id=${user.id}` : null); // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  const onDropBanner = useCallback(file => {\n    const _file = file[0];\n    if (!_file) toast.warning(\"Solo imágenes en formato png o jpg\");else {\n      setBanner(URL.createObjectURL(_file));\n      setDataBanner(_file);\n    }\n  }); // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  const onDropAvatar = useCallback(file => {\n    const _file = file[0];\n    if (!_file) toast.warning(\"Solo imágenes en formato png o jpg\");else {\n      setAvatar(URL.createObjectURL(_file));\n      setDataAvatar(_file);\n    }\n  }); //Banner\n  // : getRootBannerProps es un alias al getRootProps\n\n  const {\n    getRootProps: getRootBannerProps,\n    getInputProps: getInputBannerProps\n  } = useDropzone({\n    accept: \"image/jpg, image/png, image/JPEG\",\n    multiple: false,\n    onDrop: onDropBanner\n  }); //Avatar\n\n  const {\n    getRootProps: getRootAvatarProps,\n    getInputProps: getInputAvatarProps\n  } = useDropzone({\n    accept: \"image/jpg, image/png, image/JPEG\",\n    multiple: false,\n    onDrop: onDropAvatar\n  });\n\n  const onChange = e => {\n    setData({ ...data,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const onSubmit = e => {\n    e.preventDefault();\n\n    if (dataBanner) {\n      UploadBannerApi(dataBanner).catch(error => toast.error(\"Ha ocurido un error al actualizar el banner\")).finally(() => {\n        window.location.reload();\n        setShow(false);\n      });\n    }\n\n    if (dataAvatar) {\n      UploadAvatarApi(dataAvatar).catch(error => toast.error(\"Ha ocurido un error al actualizar el Avatar\")).finally(() => {\n        window.location.reload();\n        setShow(false);\n      });\n    }\n\n    if (data) {\n      UpdateUserApi(data).catch(error => toast.error(\"Ha ocurrido un error al actualizar el perfil\")).finally(() => {\n        setCheckLogin(true);\n        setShow(false);\n      });\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"update-user\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", Object.assign({\n    className: \"banner\",\n    style: {\n      backgroundImage: `url('${banner}')`\n    }\n  }, getRootBannerProps(), {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", Object.assign({}, getInputBannerProps(), {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(Camera, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", Object.assign({\n    className: \"avatar\",\n    style: {\n      backgroundImage: `url('${avatar}')`\n    }\n  }, getRootAvatarProps(), {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", Object.assign({}, getInputAvatarProps(), {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(Camera, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(Form, {\n    onSubmit: onSubmit,\n    onChange: onChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Form.Group, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Form.Control, {\n    name: \"nombre\",\n    placeholder: \"Nombres\",\n    type: \"text\",\n    defaultValue: data.nombre,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Form.Control, {\n    name: \"apellido\",\n    placeholder: \"Apellidos\",\n    type: \"text\",\n    defaultValue: data.apellido,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 29\n    }\n  })))), /*#__PURE__*/React.createElement(Form.Group, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Form.Control, {\n    as: \"textarea\",\n    placeholder: \"Ingresa tu biogra\\xEDa\",\n    type: \"text\",\n    row: \"3\",\n    name: \"biografia\",\n    defaultValue: data.biografia,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(Form.Group, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Form.Control, {\n    name: \"sitioweb\",\n    placeholder: \"Sitio web\",\n    type: \"text\",\n    defaultValue: data.sitioweb,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(Form.Group, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(DatePicker, {\n    placeholder: \"Fecha de Nacimiento\",\n    locale: es,\n    selected: new Date(data.fechanac),\n    onChange: value => setData({ ...data,\n      fechanac: value\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(Button, {\n    className: \"btn-submit\",\n    variant: \"primary\",\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 17\n    }\n  }, \"Actualizar\")));\n};\n\nexport default UpdateUser;\n\nfunction initForm(user) {\n  return {\n    nombre: user.nombre || \"\",\n    apellido: user.apellido || \"\",\n    biografia: user.biografia || \"\",\n    sitioweb: user.sitioweb || \"\",\n    fechanac: user.fechanac || \"\"\n  };\n}","map":{"version":3,"sources":["/Users/jhairorivera/Documents/Cursos/twitter/src/components/views/User/UpdateUser.js"],"names":["React","useState","useCallback","Form","Row","Col","Button","toast","DatePicker","es","useDropzone","LOCALHOST","Camera","UploadBannerApi","UploadAvatarApi","UpdateUserApi","UpdateUser","props","user","setShow","setCheckLogin","data","setData","initForm","dataBanner","setDataBanner","dataAvatar","setDataAvatar","banner","setBanner","id","avatar","setAvatar","onDropBanner","file","_file","warning","URL","createObjectURL","onDropAvatar","getRootProps","getRootBannerProps","getInputProps","getInputBannerProps","accept","multiple","onDrop","getRootAvatarProps","getInputAvatarProps","onChange","e","target","name","value","onSubmit","preventDefault","catch","error","finally","window","location","reload","backgroundImage","nombre","apellido","biografia","sitioweb","Date","fechanac"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,QAAf,EAAyBC,WAAzB,QAA2C,OAA3C;AACA,SAAQC,IAAR,EAAcC,GAAd,EAAmBC,GAAnB,EAAwBC,MAAxB,QAAqC,iBAArC;AACA,SAAQC,KAAR,QAAoB,gBAApB;AACA,OAAOC,UAAP,MAAuB,kBAAvB;AACA,OAAOC,EAAP,MAAe,oBAAf;AACA,SAAQC,WAAR,QAA0B,gBAA1B;AAEA,SAAQC,SAAR,QAAwB,0BAAxB;AACA,SAAQC,MAAR,QAAqB,sBAArB;AACA,SAAQC,eAAR,QAA8B,8BAA9B;AACA,SAAQC,eAAR,QAA8B,2BAA9B;AACA,SAAQC,aAAR,QAA4B,wBAA5B;AACA,OAAO,+BAAP;;AACA,MAAMC,UAAU,GAAIC,KAAD,IAAW;AAC1B,QAAM;AAACC,IAAAA,IAAD;AAAOC,IAAAA,OAAP;AAAgBC,IAAAA;AAAhB,MAAiCH,KAAvC;AACA,QAAM,CAACI,IAAD,EAAOC,OAAP,IAAkBrB,QAAQ,CAACsB,QAAQ,CAACL,IAAD,CAAT,CAAhC;AACA,QAAM,CAACM,UAAD,EAAaC,aAAb,IAA8BxB,QAAQ,CAAC,IAAD,CAA5C;AACA,QAAM,CAACyB,UAAD,EAAaC,aAAb,IAA8B1B,QAAQ,CAAC,IAAD,CAA5C,CAJ0B,CAK1B;;AACA,QAAM,CAAC2B,MAAD,EAASC,SAAT,IAAsB5B,QAAQ,CAChC,CAAAiB,IAAI,SAAJ,IAAAA,IAAI,WAAJ,YAAAA,IAAI,CAAEU,MAAN,IAAgB,GAAEjB,SAAU,qBAAoBO,IAAI,CAACY,EAAG,EAAxD,GAA4D,IAD5B,CAApC;AAGA,QAAM,CAACC,MAAD,EAASC,SAAT,IAAsB/B,QAAQ,CAChC,CAAAiB,IAAI,SAAJ,IAAAA,IAAI,WAAJ,YAAAA,IAAI,CAAEa,MAAN,IAAgB,GAAEpB,SAAU,qBAAoBO,IAAI,CAACY,EAAG,EAAxD,GAA4D,IAD5B,CAApC,CAT0B,CAY1B;;AACA,QAAMG,YAAY,GAAG/B,WAAW,CAACgC,IAAI,IAAG;AACpC,UAAMC,KAAK,GAAGD,IAAI,CAAC,CAAD,CAAlB;AACA,QAAG,CAACC,KAAJ,EACI5B,KAAK,CAAC6B,OAAN,CAAc,oCAAd,EADJ,KAEI;AACAP,MAAAA,SAAS,CAACQ,GAAG,CAACC,eAAJ,CAAoBH,KAApB,CAAD,CAAT;AACAV,MAAAA,aAAa,CAACU,KAAD,CAAb;AACH;AACJ,GAR+B,CAAhC,CAb0B,CAsB1B;;AACA,QAAMI,YAAY,GAAGrC,WAAW,CAACgC,IAAI,IAAG;AACpC,UAAMC,KAAK,GAAGD,IAAI,CAAC,CAAD,CAAlB;AACA,QAAG,CAACC,KAAJ,EACI5B,KAAK,CAAC6B,OAAN,CAAc,oCAAd,EADJ,KAEI;AACAJ,MAAAA,SAAS,CAACK,GAAG,CAACC,eAAJ,CAAoBH,KAApB,CAAD,CAAT;AACAR,MAAAA,aAAa,CAACQ,KAAD,CAAb;AACH;AACJ,GAR+B,CAAhC,CAvB0B,CAgC1B;AACA;;AACA,QAAM;AAACK,IAAAA,YAAY,EAACC,kBAAd;AAAkCC,IAAAA,aAAa,EAAEC;AAAjD,MAAwEjC,WAAW,CAAC;AACtFkC,IAAAA,MAAM,EAAE,kCAD8E;AAEtFC,IAAAA,QAAQ,EAAE,KAF4E;AAGtFC,IAAAA,MAAM,EAAEb;AAH8E,GAAD,CAAzF,CAlC0B,CAuC1B;;AACA,QAAM;AAACO,IAAAA,YAAY,EAACO,kBAAd;AAAkCL,IAAAA,aAAa,EAAEM;AAAjD,MAAwEtC,WAAW,CAAC;AACtFkC,IAAAA,MAAM,EAAE,kCAD8E;AAEtFC,IAAAA,QAAQ,EAAE,KAF4E;AAGtFC,IAAAA,MAAM,EAAEP;AAH8E,GAAD,CAAzF;;AAKA,QAAMU,QAAQ,GAAGC,CAAC,IAAE;AAChB5B,IAAAA,OAAO,CAAC,EACJ,GAAGD,IADC;AACK,OAAC6B,CAAC,CAACC,MAAF,CAASC,IAAV,GAAkBF,CAAC,CAACC,MAAF,CAASE;AADhC,KAAD,CAAP;AAGH,GAJD;;AAKA,QAAMC,QAAQ,GAAGJ,CAAC,IAAG;AACjBA,IAAAA,CAAC,CAACK,cAAF;;AACA,QAAG/B,UAAH,EAAc;AACVX,MAAAA,eAAe,CAACW,UAAD,CAAf,CAA4BgC,KAA5B,CAAkCC,KAAK,IACnClD,KAAK,CAACkD,KAAN,CAAY,6CAAZ,CADJ,EAGCC,OAHD,CAGS,MAAK;AAACC,QAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB;AAA0B1C,QAAAA,OAAO,CAAC,KAAD,CAAP;AAAgB,OAHzD;AAIH;;AACD,QAAGO,UAAH,EAAc;AACVZ,MAAAA,eAAe,CAACY,UAAD,CAAf,CAA4B8B,KAA5B,CAAkCC,KAAK,IACnClD,KAAK,CAACkD,KAAN,CAAY,6CAAZ,CADJ,EAGCC,OAHD,CAGS,MAAI;AAAEC,QAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB;AAA0B1C,QAAAA,OAAO,CAAC,KAAD,CAAP;AAAgB,OAHzD;AAIH;;AACD,QAAGE,IAAH,EAAQ;AACJN,MAAAA,aAAa,CAACM,IAAD,CAAb,CAAoBmC,KAApB,CAA0BC,KAAK,IAC3BlD,KAAK,CAACkD,KAAN,CAAY,8CAAZ,CADJ,EAGCC,OAHD,CAGS,MAAI;AACTtC,QAAAA,aAAa,CAAC,IAAD,CAAb;AACAD,QAAAA,OAAO,CAAC,KAAD,CAAP;AACH,OAND;AAOH;AACJ,GAvBD;;AAwBA,sBACI;AAAK,IAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAC,QAAf;AAAwB,IAAA,KAAK,EAAE;AAAC2C,MAAAA,eAAe,EAAG,QAAOlC,MAAO;AAAjC;AAA/B,KAA0Ea,kBAAkB,EAA5F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACI,+CAAWE,mBAAmB,EAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KADJ,eAEI,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,CADJ,eAKI;AAAK,IAAA,SAAS,EAAC,QAAf;AAAwB,IAAA,KAAK,EAAE;AAACmB,MAAAA,eAAe,EAAG,QAAO/B,MAAO;AAAjC;AAA/B,KAA0EgB,kBAAkB,EAA5F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACI,+CAAWC,mBAAmB,EAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KADJ,eAEI,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,CALJ,eASI,oBAAC,IAAD;AAAM,IAAA,QAAQ,EAAEM,QAAhB;AAA0B,IAAA,QAAQ,EAAEL,QAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,IAAD,CAAM,OAAN;AAAc,IAAA,IAAI,EAAC,QAAnB;AAA4B,IAAA,WAAW,EAAC,SAAxC;AAAkD,IAAA,IAAI,EAAC,MAAvD;AAA8D,IAAA,YAAY,EAAE5B,IAAI,CAAC0C,MAAjF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CADJ,eAII,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,IAAD,CAAM,OAAN;AAAc,IAAA,IAAI,EAAC,UAAnB;AAA8B,IAAA,WAAW,EAAC,WAA1C;AAAsD,IAAA,IAAI,EAAC,MAA3D;AAAkE,IAAA,YAAY,EAAE1C,IAAI,CAAC2C,QAArF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CAJJ,CADJ,CADJ,eAWI,oBAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,IAAD,CAAM,OAAN;AAAc,IAAA,EAAE,EAAC,UAAjB;AAA4B,IAAA,WAAW,EAAC,wBAAxC;AAA8D,IAAA,IAAI,EAAC,MAAnE;AAA0E,IAAA,GAAG,EAAC,GAA9E;AACA,IAAA,IAAI,EAAC,WADL;AACiB,IAAA,YAAY,EAAE3C,IAAI,CAAC4C,SADpC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CAXJ,eAeI,oBAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,IAAD,CAAM,OAAN;AAAc,IAAA,IAAI,EAAC,UAAnB;AAA8B,IAAA,WAAW,EAAC,WAA1C;AAAsD,IAAA,IAAI,EAAC,MAA3D;AAAkE,IAAA,YAAY,EAAE5C,IAAI,CAAC6C,QAArF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CAfJ,eAkBI,oBAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,UAAD;AAAY,IAAA,WAAW,EAAC,qBAAxB;AAA8C,IAAA,MAAM,EAAEzD,EAAtD;AACA,IAAA,QAAQ,EAAE,IAAI0D,IAAJ,CAAS9C,IAAI,CAAC+C,QAAd,CADV;AAEA,IAAA,QAAQ,EAAIf,KAAK,IAAI/B,OAAO,CAAC,EAAC,GAAGD,IAAJ;AAAU+C,MAAAA,QAAQ,EAAGf;AAArB,KAAD,CAF5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CAlBJ,eAuBI,oBAAC,MAAD;AAAQ,IAAA,SAAS,EAAC,YAAlB;AAA+B,IAAA,OAAO,EAAC,SAAvC;AAAiD,IAAA,IAAI,EAAC,QAAtD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAvBJ,CATJ,CADJ;AAqCH,CA/GD;;AAgHA,eAAerC,UAAf;;AACA,SAASO,QAAT,CAAkBL,IAAlB,EAAuB;AACnB,SAAO;AACH6C,IAAAA,MAAM,EAAE7C,IAAI,CAAC6C,MAAL,IAAe,EADpB;AAEHC,IAAAA,QAAQ,EAAE9C,IAAI,CAAC8C,QAAL,IAAiB,EAFxB;AAGHC,IAAAA,SAAS,EAAE/C,IAAI,CAAC+C,SAAL,IAAkB,EAH1B;AAIHC,IAAAA,QAAQ,EAAEhD,IAAI,CAACgD,QAAL,IAAiB,EAJxB;AAKHE,IAAAA,QAAQ,EAAElD,IAAI,CAACkD,QAAL,IAAiB;AALxB,GAAP;AAOH","sourcesContent":["import React, {useState, useCallback} from 'react';\nimport {Form, Row, Col, Button} from \"react-bootstrap\";\nimport {toast} from \"react-toastify\";\nimport DatePicker from \"react-datepicker\";\nimport es from \"date-fns/locale/es\";\nimport {useDropzone} from \"react-dropzone\";\n\nimport {LOCALHOST} from \"../../../utils/Constants\";\nimport {Camera} from \"../../../utils/Icons\";\nimport {UploadBannerApi} from \"../../../api/UploadBannerAPI\";\nimport {UploadAvatarApi} from \"../../../api/UploadAvatar\";\nimport {UpdateUserApi} from \"../../../api/UpdateAPI\";\nimport \"../../../scss/UpdateUser.scss\";\nconst UpdateUser = (props) => {\n    const {user, setShow, setCheckLogin} = props;\n    const [data, setData] = useState(initForm(user));\n    const [dataBanner, setDataBanner] = useState(null);\n    const [dataAvatar, setDataAvatar] = useState(null);\n    //Codigo para cambiar el banner y avatar utilizando la libreria useDropZone\n    const [banner, setBanner] = useState(\n        user?.banner ? `${LOCALHOST}/obtenerBanner?id=${user.id}` : null\n    );\n    const [avatar, setAvatar] = useState(\n        user?.avatar ? `${LOCALHOST}/obtenerAvatar?id=${user.id}` : null\n    );\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    const onDropBanner = useCallback(file =>{\n        const _file = file[0];\n        if(!_file)\n            toast.warning(\"Solo imágenes en formato png o jpg\");\n        else{\n            setBanner(URL.createObjectURL(_file));\n            setDataBanner(_file);\n        }\n    });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    const onDropAvatar = useCallback(file =>{\n        const _file = file[0];\n        if(!_file)\n            toast.warning(\"Solo imágenes en formato png o jpg\");\n        else{\n            setAvatar(URL.createObjectURL(_file));\n            setDataAvatar(_file);\n        }\n    });\n    //Banner\n    // : getRootBannerProps es un alias al getRootProps\n    const {getRootProps:getRootBannerProps, getInputProps: getInputBannerProps} = useDropzone({\n        accept: \"image/jpg, image/png, image/JPEG\",\n        multiple: false,\n        onDrop: onDropBanner\n    });\n    //Avatar\n    const {getRootProps:getRootAvatarProps, getInputProps: getInputAvatarProps} = useDropzone({\n        accept: \"image/jpg, image/png, image/JPEG\",\n        multiple: false,\n        onDrop: onDropAvatar\n    });\n    const onChange = e=>{\n        setData({\n            ...data, [e.target.name] : e.target.value\n        });\n    }\n    const onSubmit = e =>{\n        e.preventDefault();\n        if(dataBanner){\n            UploadBannerApi(dataBanner).catch(error => \n                toast.error(\"Ha ocurido un error al actualizar el banner\")\n            )\n            .finally(()=> {window.location.reload(); setShow(false);})\n        }\n        if(dataAvatar){\n            UploadAvatarApi(dataAvatar).catch(error => \n                toast.error(\"Ha ocurido un error al actualizar el Avatar\")\n            )\n            .finally(()=>{ window.location.reload(); setShow(false);})\n        }\n        if(data){\n            UpdateUserApi(data).catch(error => \n                toast.error(\"Ha ocurrido un error al actualizar el perfil\")\n            )\n            .finally(()=>{\n                setCheckLogin(true);\n                setShow(false);\n            });\n        }\n    }\n    return (\n        <div className=\"update-user\">\n            <div className=\"banner\" style={{backgroundImage: `url('${banner}')`}} {...getRootBannerProps()} >\n                <input {...getInputBannerProps()} />\n                <Camera />\n            </div>\n            <div className=\"avatar\" style={{backgroundImage: `url('${avatar}')`}} {...getRootAvatarProps()} >\n                <input {...getInputAvatarProps()} />\n                <Camera />\n            </div>\n            <Form onSubmit={onSubmit} onChange={onChange}> \n                <Form.Group>\n                    <Row>\n                        <Col>\n                            <Form.Control name=\"nombre\" placeholder=\"Nombres\" type=\"text\" defaultValue={data.nombre} />\n                        </Col>\n                        <Col>\n                            <Form.Control name=\"apellido\" placeholder=\"Apellidos\" type=\"text\" defaultValue={data.apellido} />\n                        </Col>\n                    </Row>\n                </Form.Group>\n                <Form.Group>\n                    <Form.Control as=\"textarea\" placeholder=\"Ingresa tu biograía\" type=\"text\" row=\"3\" \n                    name=\"biografia\" defaultValue={data.biografia} />\n                </Form.Group>\n                <Form.Group>\n                    <Form.Control name=\"sitioweb\" placeholder=\"Sitio web\" type=\"text\" defaultValue={data.sitioweb} />\n                </Form.Group>\n                <Form.Group>\n                    <DatePicker placeholder=\"Fecha de Nacimiento\" locale={es} \n                    selected={new Date(data.fechanac)} \n                    onChange = {value => setData({...data, fechanac : value }) } />\n                </Form.Group>\n                <Button className=\"btn-submit\" variant=\"primary\" type=\"submit\">Actualizar</Button>\n            </Form>\n        </div>\n    );\n}\nexport default UpdateUser;\nfunction initForm(user){\n    return {\n        nombre: user.nombre || \"\",\n        apellido: user.apellido || \"\",\n        biografia: user.biografia || \"\",\n        sitioweb: user.sitioweb || \"\",\n        fechanac: user.fechanac || \"\"\n    }\n}"]},"metadata":{},"sourceType":"module"}