{"ast":null,"code":"var _jsxFileName = \"/Users/jhairorivera/Documents/Cursos/twitter/src/components/views/Users/Users.js\";\n\n/* eslint-disable eqeqeq */\nimport React, { useState, useEffect } from 'react';\nimport queryString from \"query-string\";\nimport { withRouter } from \"react-router-dom\";\nimport { useDebouncedCallback } from \"use-debounce\";\nimport { isEmpty } from \"lodash\";\nimport { Spinner, Button, ButtonGroup } from \"react-bootstrap\";\nimport BasicLayout from \"../../../layout/BasicLayout\";\nimport { getFollowers } from \"../../../api/Follow\";\nimport ListUsers from \"../Users/ListUsers\";\nimport \"../../../scss/Users.scss\";\n\nconst Users = props => {\n  const {\n    setCheckLogin,\n    location,\n    history\n  } = props;\n  const [users, setUsers] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [type, setType] = useState(location.search || \"follow\");\n  const params = queryString.stringify(getParams(location));\n\n  const _params = getParams(location);\n\n  const [onSearch] = useDebouncedCallback(value => {\n    setUsers(null);\n    history.push({\n      search: queryString.stringify({ ...getParams(location),\n        search: value,\n        page: 1\n      })\n    });\n  }, 200);\n  useEffect(() => {\n    getFollowers(params).then(response => {\n      if (params.page == 1) {\n        if (isEmpty(response)) setUsers([]);else setUsers(response);\n      } else {\n        if (!response) setLoading(0);else setUsers([...users, ...response]);\n      }\n    }).catch(() => setUsers([])); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [location]);\n\n  const changeType = type => {\n    setUsers(null);\n    if (type) setType(type);\n    history.push({\n      search: queryString.stringify({\n        type: type,\n        page: 1\n      })\n    });\n  };\n\n  const moreUsers = () => {\n    setLoading(true);\n    const newPage = parseInt(_params.page) + 1;\n    history.push({\n      search: queryString.stringify({ ...getParams(location),\n        page: newPage\n      })\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(BasicLayout, {\n    className: \"users\",\n    setCheckLogin: setCheckLogin,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"users-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 17\n    }\n  }, \"Usuarios\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    onChange: e => onSearch(e.target.value),\n    placeholder: \"Buscar usuarios\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(ButtonGroup, {\n    className: \"users-options\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    className: type === \"follow\" && \"active\",\n    onClick: () => changeType(\"follow\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 17\n    }\n  }, \"Siguiendo\"), /*#__PURE__*/React.createElement(Button, {\n    className: type === \"new\" && \"active\",\n    onClick: () => changeType(\"new\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 17\n    }\n  }, \"Seguir\")), !users ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"users-loading\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Spinner, {\n    variant: \"info\",\n    animation: \"border\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 21\n    }\n  }), \"Buscando Usuarios\") : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ListUsers, {\n    users: users,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    onClick: moreUsers,\n    className: \"load-more\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 17\n    }\n  }, !loading ? loading !== 0 && \"Cargar más usuarios\" : /*#__PURE__*/React.createElement(Spinner, {\n    as: \"span\",\n    animation: \"grow\",\n    size: \"sm\",\n    role: \"status\",\n    \"aria-hidden\": \"true\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 25\n    }\n  }))));\n};\n\nfunction getParams(location) {\n  const {\n    type = \"follow\",\n    page = 1,\n    search\n  } = queryString.parse(location.search);\n  return {\n    type,\n    page,\n    search\n  };\n}\n\nexport default withRouter(Users);","map":{"version":3,"sources":["/Users/jhairorivera/Documents/Cursos/twitter/src/components/views/Users/Users.js"],"names":["React","useState","useEffect","queryString","withRouter","useDebouncedCallback","isEmpty","Spinner","Button","ButtonGroup","BasicLayout","getFollowers","ListUsers","Users","props","setCheckLogin","location","history","users","setUsers","loading","setLoading","type","setType","search","params","stringify","getParams","_params","onSearch","value","push","page","then","response","catch","changeType","moreUsers","newPage","parseInt","e","target","parse"],"mappings":"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","sourcesContent":["/* eslint-disable eqeqeq */\nimport React, {useState, useEffect} from 'react';\nimport queryString from \"query-string\";\nimport {withRouter} from \"react-router-dom\";\nimport {useDebouncedCallback} from \"use-debounce\";\nimport {isEmpty} from \"lodash\";\nimport {Spinner, Button, ButtonGroup} from \"react-bootstrap\";\nimport BasicLayout from \"../../../layout/BasicLayout\";\nimport {getFollowers} from \"../../../api/Follow\";\nimport ListUsers from \"../Users/ListUsers\";\nimport \"../../../scss/Users.scss\";\nconst Users = (props) => {\n    const {setCheckLogin, location, history} = props;\n    const [users, setUsers] = useState(null);\n    const [loading, setLoading] = useState(false);\n    const [type, setType] = useState(location.search || \"follow\");\n    const params = queryString.stringify(getParams(location));\n    const _params = getParams(location);\n    const [onSearch] = useDebouncedCallback((value)=>{\n        setUsers(null);\n        history.push({\n            search : queryString.stringify({ ...getParams(location), search: value, page:1})\n        });\n    }, 200);\n    useEffect(() => {\n        getFollowers(params).then(response=>{\n            if(params.page ==1){\n                if(isEmpty(response))\n                    setUsers([]);\n                else\n                    setUsers(response)\n            }\n            else{\n                if(!response)\n                    setLoading(0);\n                else\n                    setUsers([...users, ...response])\n            }   \n        })\n        .catch(()=> setUsers([]));\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    },[location])\n    const changeType = type =>{\n        setUsers(null);\n        if(type)\n            setType(type);\n        history.push({\n            search : queryString.stringify({type: type, page:1})\n        });\n    }\n    const moreUsers = () =>{\n        setLoading(true);\n        const newPage = parseInt(_params.page) +1;\n        history.push({\n            search : queryString.stringify({...getParams(location), page:newPage})\n        });\n    }\n    return (\n        <BasicLayout className=\"users\" setCheckLogin={setCheckLogin} >\n            <div className=\"users-title\">\n                <h2>Usuarios</h2>\n                <input type=\"text\" onChange={e => onSearch(e.target.value)} placeholder=\"Buscar usuarios\" />\n            </div>\n            <ButtonGroup className=\"users-options\">\n                <Button className={type===\"follow\" && \"active\"}\n                onClick={()=> changeType(\"follow\") }>Siguiendo</Button>\n                <Button className={type===\"new\" && \"active\"}\n                onClick={()=> changeType(\"new\") }>Seguir</Button>\n            </ButtonGroup>\n            { !users ? (\n                <div className=\"users-loading\">\n                    <Spinner variant=\"info\" animation=\"border\"/>\n                    Buscando Usuarios\n                </div>\n            ) : (\n                <>\n                <ListUsers users={users} />\n                <Button onClick={moreUsers} className=\"load-more\">\n                    {!loading ? (\n                        loading !== 0 && \"Cargar más usuarios\"\n                    ): (\n                        <Spinner as=\"span\" animation=\"grow\" size=\"sm\" role=\"status\" aria-hidden=\"true\" />\n                    )}\n                </Button>\n                </>\n            )} \n        </BasicLayout>\n    );\n}\nfunction getParams(location){\n    const {type = \"follow\", page = 1, search} = queryString.parse(location.search);\n    return {type, page, search};\n}\nexport default withRouter(Users);"]},"metadata":{},"sourceType":"module"}